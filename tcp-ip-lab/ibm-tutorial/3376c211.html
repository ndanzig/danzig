<!-- output file generated by BM Utilities -->
<html>

<p><a href="./3376fm.html"><img src="fm2html-toc.gif">Table of Contents</a>  <a href="3376c210.html#H201"><img src="fm2html-previous.gif">AIX</a><br>
<head>
<title>
TCP/IP Tutorial and Technical Overview
</title>
<body>

<h2><a name="udpf1">2.11  User Datagram Protocol (UDP)</a>
</h2>
<br><br><a name=figudpa>
<img src="3376udp.gif"></a>
<br><i>Figure: User Datagram Protocol (UDP)</i><br><br>
<p><a name=index914>UDP</a> is a <i>standard protocol</i> with STD number 6.
UDP is described by <i>RFC 768 - User Datagram Protocol</i>.
<a name=index916>Its</a> status is <i>recommended</i>, but in practice every
TCP/IP implementation which is not used exclusively for routing will include
UDP.
<p>UDP is basically an application interface to IP. It adds no reliability,
flow-control or error recovery to IP. It simply serves as a
``multiplexer/demultiplexer'' for sending and receiving datagrams, using
<i>ports</i> to direct the datagrams as shown in
<a href="3376c211.html#figudpport">Figure - UDP, A Demultiplexer Based on
Ports</a>.  For a more detailed discussion of ports refer to
<a href="3376c210.html#sokapi">Ports and Sockets</a>.
<br><br><a name=figudpport>
<img src="3376f46.gif"></a>
<br><i>Figure: UDP, A Demultiplexer Based on Ports</i><br><br>
<p>UDP provides a mechanism for one application to send a datagram to another.
The UDP layer can be regarded as being extremely thin and consequently has low
overheads, but it requires the application to take responsibility for error
recovery and so on.

<h3><a name="port">2.11.1  Ports</a>
</h3>
<p>The port concept was discussed earlier in
<a href="3376c210.html#sokapi">Ports and Sockets</a>.
<p>Applications sending datagrams to a host need to identify a target which is
more specific than the IP address, since datagrams are normally directed to
certain processes and not to the system as a whole. UDP provides this by using
<i>ports</i>.
<p><a name=index917>A</a> port is a 16-bit number which identifies which
process on a host is associated with a datagram. There are two types of port:
<dl>
<dt>
well-known
<dd>Well-known ports belong to standard servers, for example TELNET uses port
23. Well-known port numbers range between 1 and 1023 (prior to 1992, the range
between 256 and 1023 was used for UNIX-specific servers). Well-known port
numbers are typically odd, because early systems using the port concept
required an odd/even pair of ports for duplex operations. Most servers require
only a single port. An exception is the BOOTP server which uses two: 67 and 68
(see <a href="3376c417.html#bootp">BOOTstrap Protocol - BOOTP</a>).
<p>The reason for well-known ports is to allow clients to be able to find
servers without configuration information. The well-known port numbers are
defined in <i>STD 2 - Assigned Internet Numbers</i>.
<dt>
ephemeral
<dd>Clients do not need well-known port numbers because they initiate
communication with servers and the port number they are using is contained in
the UDP datagrams sent to the server. Each client process is allocated a port
number as long as it needs it by the host it is running on. Ephemeral port
numbers have values greater than 1023, normally in the range 1024 to 5000. A
client can use any number allocated to it, as long as the combination of
&lt;transport protocol, IP address, port number&gt; is unique.
</dl>
<p><b>Note:</b> TCP also uses port numbers with the same values. These ports
are quite independent. Normally, a server will use either TCP or UDP, but there
are exceptions. For example, Domain Name Servers (see
<a href="3376c45.html#namesrv">Domain Name System (DNS)</a>) use both UDP port
53 and TCP port 53.

<h3><a name="H206">2.11.2  UDP Datagram Format</a>
</h3>
<p><a name=index918>Each</a> UDP datagram is sent within a single IP datagram.
Although, the IP datagram may be fragmented during transmission, the receiving
IP implementation will re-assemble it before presenting it to the UDP layer.
All IP implementations are required to accept datagrams of 576 bytes, which,
allowing for maximum-size IP header of 60 bytes means that a UDP datagram of
516 bytes is acceptable to all implementations. Many implementations will
accept larger datagrams, but this is not guaranteed. The UDP datagram has a
16-byte header which is described in
<a href="3376c211.html#figudpdg">Figure - UDP Datagram Format</a>.
<br><br><a name=figudpdg>
<img src="3376f47.gif"></a>
<br><i>Figure: UDP Datagram Format</i><br><br>
Where:
<dl>
<dt>
Source Port
<dd>Indicates the port of the sending process. It is the port to which replies
should be addressed.
<dt>
Destination Port
<dd>Specifies the port of the destination process on the destination host.
<dt>
Length
<dd>Is the length (in bytes) of this user datagram including the header.
<dt>
Checksum
<dd><a name=index921>Is</a> an optional 16-bit one's complement of the one's
complement sum of a pseudo-IP header, the UDP header and the UDP data. The
pseudo-IP header contains the source and destination IP addresses, the protocol
and the UDP length:
<br><br><a name=fig>
<img src="3376f48.gif"></a>
<br><i>Figure: Pseudo-IP Header</i><br><br>
<p>The pseudo-IP header effectively extends the checksum to include the
original (unfragmented) IP datagram.
</dl>

<h3><a name="H209">2.11.3  UDP Application Programming Interface</a>
</h3>
<p><a name=index923>The</a> application interface offered by UDP is described
in RFC 768. <a name=index924>It</a> provides for:
<ul>
<li>The creation of new receive ports.
<li>Receive operation that returns the data bytes and an indication of source
port and source IP address.
<li>Send operation that has as parameters the data, source and destination
ports and addresses.
</ul>
<p>The way this should be implemented is left to the discretion of each vendor.
<p>Be aware that UDP and IP do not provide guaranteed delivery, flow-control or
error recovery, so these must be provided by the application.
<p>Standard applications using UDP include:
<ul>
<li>Trivial File Transfer Protocol (TFTP)
<li>Domain Name System (DNS) name server
<li>Remote Procedure Call (RPC), used by the Network File System (NFS)
<li>Network Computing System (NCS)
<li>Simple Network Management Protocol (SNMP)
</ul>

<p><a href="./3376fm.html"><img src="fm2html-toc.gif">Table of Contents</a>  <a href="3376c212.html#tcp"><img src="fm2html-next.gif">Transmission
Control Protocol (TCP)</a><br>
</html>
