<!-- output file generated by BM Utilities -->
<html>

<p><a href="./3376fm.html"><img src="fm2html-toc.gif">Table of Contents</a>  <a href="3376c42.html#H434"><img src="fm2html-previous.gif">3270
Full-Screen Cross Table</a><br>
<head>
<title>
TCP/IP Tutorial and Technical Overview
</title>
<body>

<h2><a name="tftp">4.3  Trivial File Transfer Protocol (TFTP)</a>
</h2>
<br><br><a name=figtftp>
<img src="3376tftp.gif"></a>
<br><i>Figure: Trivial File Transfer Protocol (TFTP)</i><br><br>
<p><a name=index1445>The</a> TFTP protocol is a <i>standard protocol</i> with
STD number 33. <a name=index1446>Its</a> status is <i>elective</i> and it is
described in <i>RFC 1350 - The TFTP Protocol (Revision 2)</i>.
<p><a name=index1447>TCP/IP</a> file transfer is a disk-to-disk data transfer,
as opposed to, for example, the VM SENDFILE command, a function that is
considered in the TCP/IP world as a mailing function, where you send out the
data to someone's mailbox (reader in the case of VM).
<p>TFTP is an extremely simple protocol to transfer files. It is implemented on
the internet UDP layer (User Datagram Protocol) and lacks most of the features
of FTP (see <a href="3376c44.html#ftp">File Transfer Protocol (FTP)</a>). The
only thing it can do is read/write a file from/to a server.
<p><b>Note:</b> It has no provisions for user authentication: it is an unsecure
protocol.

<h3><a name="tftpusa">4.3.1  Usage</a>
</h3>
<p>The command:
<pre>
TFTP &lt;hostname&gt;
</pre>
takes you to the interactive prompt where you can enter subcommands:
<dl>
<dt>
<tt>Connect &lt;host&gt;</tt>
<dd>specify destination host ID
<dt>
<tt>Mode &lt;ascii/binary&gt;</tt>
<dd>specify the type of transfer mode
<dt>
<tt>Get &lt;remote filename&gt; [&lt;local filename&gt;]</tt>
<dd>retrieve a file
<dt>
<tt>Put &lt;remote filename&gt; [&lt;local filename&gt;]</tt>
<dd>store a file
<dt>
<tt>Verbose</tt>
<dd>toggle verbose mode, which displays additional information during file
transfer, on or off
<dt>
<tt>Quit</tt>
<dd>exit TFTP
</dl>
For a full list of these commands, see the user's guide of your particular TFTP
implementation.

<h3><a name="tftppro">4.3.2  Protocol Description</a>
</h3>
<p><a name=index1449>Any</a> transfer begins with a request to read or write a
file. If the server grants the request, the connection is opened and the file
is sent in blocks of 512 bytes (fixed length). Blocks of the file are numbered
consecutively, starting at 1. Each data packet must be acknowledged by an
acknowledgment packet before the next one can be sent. Termination of the
transfer is assumed on a data packet of less than 512 bytes.
<p>Almost all errors will cause termination of the connection (lack of
reliability). If a packet gets lost in the network, a timeout will occur, after
which a retransmission of the last packet (data or acknowledgment) will take
place.
<p>There was a serious bug, known as the Sorcerer's Apprentice Syndrome, in RFC
783. It may cause excessive retransmission by both sides in some network delay
scenarios. It was documented in RFC 1123 and was corrected in RFC 1350. For
details, please refer to the RFCs.

<h4><a name="tftppac">4.3.2.1  TFTP Packets</a>
</h4>
<p><a name=index1453>Only</a> five types of packets exist:
<dl>
<b><dt></b>
Opcode
<b><dd></b><hr>Operation
<dt>
1
<dd>Read Request (RRQ)
<dt>
2
<dd>Write Request (WRQ)
<dt>
3
<dd>Data (DATA)
<dt>
4
<dd>Acknowledgment (ACK)
<dt>
5
<dd>Error (ERROR)
</dl>
The TFTP header contains the <i>opcode</i> associated with the packet.
<br><br><a name=fig>
<img src="3376f104.gif"></a>
<br><i>Figure: TFTP Packets</i><br><br>

<h4><a name="tftpfor">4.3.2.2  Data Modes</a>
</h4>
<p><a name=index1454>Three</a> modes of transfer are currently defined in RFC
1350:
<dl>
<dt>
<a name=index1455>NetASCII</a>
<dd>US-ASCII as defined in <i>USA Standard Code for Information Interchange</i>
with modifications specified in <i>RFC 854 - Telnet Protocol Specification</i>
and extended to use the high order bit. That is, it is an 8-bit character set,
unlike US-ASCII which is 7-bit.
<dt>
<a name=index1457>Octet</a>
<dd>Raw 8-bit bytes, also called binary.
<dt>
Mail
<dd>This mode was originally defined in RFC 783 and was declared obsolete by
RFC 1350. It allowed for sending mail to a user rather than transferring to a
file.
</dl>
<p>The mode used is indicated in the Request for Read/Write packet (RRQ/WRQ).

<h3><a name="H444">4.3.3  Implementations</a>
</h3>
<p><a name=index1458>TFTP</a> is implemented in the IBM TCP/IP products for VM
(client only), AIX/6000, AIX/ESA, OS/2 and DOS.

<h4><a name="H445">4.3.3.1  AIX/ESA</a>
</h4>
<p>Both the TFTP client and server functions are available.
<p><b>Note:</b> The TFTP functions are usually disabled due to security
requirements. This is especially the case in AIX/ESA. For more details, please
refer to <i>AIX/ESA Security Features User's Guide</i>.

<h4><a name="H446">4.3.3.2  AIX/6000</a>
</h4>
<p>The tftpd server (daemon) is a subserver controlled by the inetd subsystem
(also known as the super daemon).
<p>The tftp and utftp client commands are available, but they are not
recommended for use in a secure environment. The securetcpip command can be
used to disable tftpd, tftp and utftp.

<h4><a name="H447">4.3.3.3  OS/2</a>
</h4>
<p>Because of the above-mentioned lack of authorization, there are two
different ways to start the TFTP daemon (TFTPD) in an OS/2 machine (TEMP is
used as an example: it could be another name):
<ul>
<li>Via the <tt>TFTPD C:\TEMP\</tt> command: This restricts the directory where
files can be written to the TEMP directory on drive C:.
<li>Via the <tt>TFTPD C:\TEMP</tt> command: This restricts the names of the
file that are written. For example, if a client host writes a file named
CONFIG.SYS, the file will be known as TEMPCONF.SYS on your OS/2 system.
</ul>

<h4><a name="H448">4.3.3.4  DOS</a>
</h4>
TCP/IP for DOS provides a TFTP client. This is started from the DOS prompt
using the tftp command.

<p><a href="./3376fm.html"><img src="fm2html-toc.gif">Table of Contents</a>  <a href="3376c44.html#ftp"><img src="fm2html-next.gif">File
Transfer Protocol (FTP)</a><br>
</html>
